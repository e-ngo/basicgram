(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{109:function(e,t,a){e.exports=a(146)},114:function(e,t,a){},144:function(e,t,a){},146:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(9),c=a.n(r),l=(a(114),a(12)),i=a(41),s=a(25),u=a.n(s),m=a(36),p=a(13),d=a(192),f=a(189),g=a(214),E=a(99),h=a(187),b=a(53),v=a(90),y=a(35),S=a(14),C=a.n(S),O=function(e){e?C.a.defaults.headers.common.Authorization=e:delete C.a.defaults.headers.common.Authorization},w=function(e){return{type:"SET_CURRENT_USER",payload:e}},k=function(){return function(e){localStorage.removeItem("token"),localStorage.removeItem("userId"),document.cookie="userId=",document.cookie="token=",O(!1),e(w({}))}},x=Object(v.a)(function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(https://source.unsplash.com/random/1920x1080)",backgroundRepeat:"no-repeat",backgroundColor:e.palette.grey[50],backgroundSize:"cover",backgroundPosition:"center"},container:{display:"flex",alignItems:"center"},paper:{margin:e.spacing(8,4),flex:1},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},icon:{fontFamily:"Abril Fatface, cursive",marginBottom:e.spacing(8)}}}),j=Object(l.b)(function(e){return{auth:e.auth,errors:e.errors}},{loginUser:function(e){return function(t){C.a.post("/auth/login",e).then(function(e){var a=e.data,n=a.token,o=a.userId;document.cookie="token=".concat(n),document.cookie="userId=".concat(o),localStorage.setItem("token",n),localStorage.setItem("userId",o),O(n),t(w(n))}).catch(function(e){return t({type:"GET_ERRORS",payload:e.response.data})})}}})(Object(i.g)(function(e){var t=e.loginUser,a=e.auth,n=e.history,r=x(),c=o.a.useState(""),l=Object(p.a)(c,2),i=l[0],s=l[1],v=o.a.useState(""),S=Object(p.a)(v,2),C=S[0],O=S[1],w=function(){var e=Object(m.a)(u.a.mark(function e(a){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),t({username:i,password:C});case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();return a.isAuthenticated&&n.push("/feed"),o.a.createElement(h.a,{container:!0,component:"main",className:r.root},o.a.createElement(f.a,null),o.a.createElement(h.a,{item:!0,xs:!1,sm:4,md:8,className:r.image}),o.a.createElement(h.a,{item:!0,xs:12,sm:8,md:4,component:E.a,elevation:6,className:r.container,square:!0},o.a.createElement("div",{className:r.paper},o.a.createElement(b.a,{component:"h1",variant:"h3",className:r.icon},"basic."),o.a.createElement("form",{className:r.form,onSubmit:w,noValidate:!0},o.a.createElement(g.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",autoFocus:!0,value:i,onChange:function(e){return s(e.target.value)}}),o.a.createElement(g.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:C,onChange:function(e){return O(e.target.value)}}),o.a.createElement(d.a,{type:"submit",variant:"contained",color:"primary",className:r.submit},"Sign In"),o.a.createElement(h.a,{container:!0,justify:"flex-start"},o.a.createElement(h.a,{item:!0},o.a.createElement(y.b,{to:"/signup",variant:"body2"},"Don't have an account? ",o.a.createElement("b",null,"Sign Up"))))))))})),N=Object(v.a)(function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(https://source.unsplash.com/random/1920x1080)",backgroundRepeat:"no-repeat",backgroundColor:e.palette.grey[50],backgroundSize:"cover",backgroundPosition:"center"},container:{display:"flex",alignItems:"center"},paper:{margin:e.spacing(8,4),flex:1},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(4)},submit:{margin:e.spacing(3,0,2)},icon:{fontFamily:"Abril Fatface, cursive",marginBottom:e.spacing(8)}}}),T=Object(l.b)(function(e){return{auth:e.auth,errors:e.errors}},{registerUser:function(e,t){return function(a){C.a.post("/auth/create-user",e).then(function(e){return t.push("/login")}).catch(function(e){return a({type:"GET_ERRORS",payload:e.response.data})})}}})(Object(i.g)(function(e){var t=e.registerUser,a=e.history,n=e.auth,r=N(),c=o.a.useState(""),l=Object(p.a)(c,2),i=l[0],s=l[1],v=o.a.useState(""),S=Object(p.a)(v,2),C=S[0],O=S[1],w=o.a.useState(""),k=Object(p.a)(w,2),x=k[0],j=k[1],T=o.a.useState(""),R=Object(p.a)(T,2),_=R[0],P=R[1],U=function(){var e=Object(m.a)(u.a.mark(function e(n){var o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),o={username:C,password:_,name:x,email:i},console.log(o),t(o,a);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();return n.isAuthenticated&&a.push("/feed"),o.a.createElement(h.a,{container:!0,component:"main",className:r.root},o.a.createElement(f.a,null),o.a.createElement(h.a,{item:!0,xs:!1,sm:4,md:8,className:r.image}),o.a.createElement(h.a,{item:!0,xs:12,sm:8,md:4,component:E.a,elevation:6,className:r.container,square:!0},o.a.createElement("div",{className:r.paper},o.a.createElement(b.a,{component:"h1",variant:"h3",className:r.icon},"basic."),o.a.createElement("form",{className:r.form,onSubmit:U,noValidate:!0},o.a.createElement(h.a,{container:!0,spacing:2},o.a.createElement(h.a,{item:!0,xs:12},o.a.createElement(g.a,{autoComplete:"fname",name:"fullName",variant:"outlined",required:!0,fullWidth:!0,id:"fullName",label:"Full Name",autoFocus:!0,value:x,onChange:function(e){return j(e.target.value)}})),o.a.createElement(h.a,{item:!0,xs:12},o.a.createElement(g.a,{variant:"outlined",required:!0,fullWidth:!0,id:"userName",label:"Username",name:"userName",autoComplete:"uname",value:C,onChange:function(e){return O(e.target.value)}})),o.a.createElement(h.a,{item:!0,xs:12},o.a.createElement(g.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",value:i,onChange:function(e){return s(e.target.value)}})),o.a.createElement(h.a,{item:!0,xs:12},o.a.createElement(g.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:_,onChange:function(e){return P(e.target.value)}}))),o.a.createElement(d.a,{type:"submit",variant:"contained",color:"primary",className:r.submit},"Sign Up"),o.a.createElement(h.a,{container:!0,justify:"flex-start"},o.a.createElement(h.a,{item:!0},o.a.createElement(y.b,{to:"/login",variant:"body2"},"Already have an account? ",o.a.createElement("b",null,"Sign in"))))))))})),R=a(67),_=Object(l.b)(function(e){return{auth:e.auth}})(function(e){var t=e.component,a=e.auth,n=Object(R.a)(e,["component","auth"]);return o.a.createElement(i.b,Object.assign({},n,{render:function(e){return!0===a.isAuthenticated?o.a.createElement(t,e):o.a.createElement(i.a,{to:"/login"})}}))}),P=a(70),U=a(207),B=a(68),F=a.n(B),I=a(195),A=a(196),D=a(193),G=a(194),W=a(197),z=Object(v.a)(function(e){return{toolbarTitle:{flex:1,textAlign:"center",fontFamily:"Abril Fatface, cursive"},appBar:{background:"#fff",color:"#000"}}});function M(e){var t=e.children,a=e.window,n=Object(D.a)({target:a?a():void 0});return o.a.createElement(G.a,{appear:!1,direction:"down",in:!n},t)}function L(e){var t=z();return o.a.createElement(o.a.Fragment,null,o.a.createElement(M,e,o.a.createElement(I.a,{positio:"static",className:t.appBar,elevation:0},o.a.createElement(A.a,null,e.backButton?o.a.createElement(W.a,{style:{cursor:"pointer"},onClick:e.backButton},"Back"):"",o.a.createElement(b.a,{component:"h1",variant:"h4",color:"inherit",align:"center",noWrap:!0,className:t.toolbarTitle},"basic."),o.a.createElement(W.a,{style:{cursor:"pointer"},onClick:e.onLogoutClick},"Logout")))))}var H=a(198),q=a(199),J=a(200),V=a(201),X=a(202),Y=function(e,t){return function(a){var n={text:t,postId:e};return C.a.post("/basicgrams/comment/new",n).then(function(e){console.log("Succesfully added comment")}).catch(function(e){a({type:"GET_ERRORS",payload:e.response.data})})}},$=a(69),K=a.n($),Q=Object(v.a)(function(e){return{mainGrid:{marginTop:e.spacing(2),display:"flex",justifyContent:"center"},card:{flex:1},media:{height:0,paddingTop:"100%"},commentInput:{width:"100%",border:"none",outline:"none",fontSize:"13px"},inputBox:{padding:e.spacing(2)}}}),Z=Object(l.b)(function(e){return{comments:e.comments}},{addComment:Y})(function(e){var t=e.addComment,a=e.post,n=e.onClickPost,r=Q(),c=o.a.useState(""),l=Object(p.a)(c,2),i=l[0],s=l[1],d=function(){var e=Object(m.a)(u.a.mark(function e(n){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),t(a._id,i).then(function(){return s("")});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();return o.a.createElement(h.a,{item:!0,className:r.mainGrid,xs:12,md:12},o.a.createElement(H.a,{className:r.card,elevation:3},o.a.createElement(q.a,{onClick:n},o.a.createElement(J.a,null,o.a.createElement(b.a,{component:"subtitle1",variant:"subtitle1"},o.a.createElement("b",null,a.author.username))),o.a.createElement(V.a,null),o.a.createElement(X.a,{className:r.media,image:a.image,title:"Image title"}),o.a.createElement(J.a,null,o.a.createElement(b.a,{component:"subtitle2",variant:"subtitle2"},o.a.createElement("b",null,a.author.username)," ",a.caption),o.a.createElement(b.a,{component:"p",variant:"p",color:"textSecondary"},K()("".concat(a.createdAt)).startOf("second").fromNow()))),o.a.createElement(V.a,null),o.a.createElement("div",{className:r.inputBox},o.a.createElement("form",{onSubmit:d},o.a.createElement("button",{type:"submit",style:{float:"right",fontSize:"13px"}},"Post"),o.a.createElement("div",{style:{overflow:"hidden",paddingRight:"0.5em"}},o.a.createElement("input",{type:"text",placeholder:"Add a comment",className:r.commentInput,value:i,onChange:function(e){return s(e.target.value)}}))))))}),ee=a(204),te=a(208),ae=a(95),ne=a.n(ae),oe=a(97),re=a.n(oe),ce=a(96),le=a.n(ce),ie=a(5),se=a(190),ue=a(206),me=a(217),pe=a(203),de=a(205),fe=a(94),ge=a.n(fe),Ee=Object(ie.a)(function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}})(function(e){var t=e.children,a=e.classes,n=e.onClose,r=Object(R.a)(e,["children","classes","onClose"]);return o.a.createElement(pe.a,Object.assign({disableTypography:!0,className:a.root},r),o.a.createElement(b.a,{variant:"h6"},t),n?o.a.createElement(ee.a,{"aria-label":"close",className:a.closeButton,onClick:n},o.a.createElement(ge.a,null)):null)}),he=Object(ie.a)(function(e){return{root:{padding:e.spacing(2)}}})(de.a),be=Object(l.b)(function(e){return{posts:e.posts,newPost:e.newPost}},{uploadPost:function(e,t){return function(a){var n=new FormData;return n.append("image",t),n.append("caption",e),C.a.post("/basicgrams/new",n,{headers:{"content-type":"multipart/form-data"}}).then(function(e){a({type:"POST_UPLOAD_SUCCESS",payload:e.newBasicgram})}).catch(function(e){a({type:"GET_ERRORS",payload:e.response.data})})}}})(function(e){var t=e.uploadPost,a=e.close,r=e.open,c=Object(n.useState)(null),l=Object(p.a)(c,2),i=l[0],s=l[1],u=Object(n.useState)(""),m=Object(p.a)(u,2),f=m[0],E=m[1],h=Object(n.useState)(""),b=Object(p.a)(h,2),v=b[0],y=b[1],S=o.a.useState({vertical:"top",horizontal:"center"}),C=Object(p.a)(S,2),O=C[0];C[1],O.vertical,O.horizontal;return o.a.createElement(o.a.Fragment,null,o.a.createElement(me.a,{onClose:a,"aria-labelledby":"customized-dialog-title",open:r},o.a.createElement(Ee,{id:"customized-dialog-title",onClose:a},"New Post"),o.a.createElement(he,{dividers:!0},o.a.createElement("div",null,o.a.createElement("div",{style:{display:"inline"}},o.a.createElement(se.a,{type:"file",onChange:function(e){e.preventDefault(),s(e.target.files[0]),E(URL.createObjectURL(e.target.files[0]))},accept:"image/*"}),i&&o.a.createElement(d.a,{autoFocus:!0,color:"primary",style:{float:"right"},onClick:function(e){e.preventDefault(),s(null),E("")}},"Remove File")),o.a.createElement("img",{style:{width:"100%"},src:f}),o.a.createElement(g.a,{multiline:!0,label:"Add a caption",style:{width:"100%",marginTop:"20px"},onChange:function(e){return y(e.target.value)}}))),o.a.createElement(ue.a,null,o.a.createElement(d.a,{autoFocus:!0,onClick:function(e){e.preventDefault(),t(v,i).then(function(){return a()})},color:"primary"},"Upload"))))}),ve=Object(v.a)(function(e){return{appBarBottom:{background:"#fff",color:"#000",top:"auto",bottom:0},grow:{flexGrow:1},fabButton:{position:"absolute",zIndex:1,top:-30,left:0,right:0,margin:"0 auto"}}});function ye(e){var t=ve(),a=o.a.useState(!1),n=Object(p.a)(a,2),r=n[0],c=n[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(I.a,Object.assign({position:"fixed",color:"primary",className:t.appBarBottom},e),o.a.createElement(U.a,{maxWidth:"sm"},o.a.createElement(A.a,null,o.a.createElement(ee.a,{edge:"start",color:"inherit",onClick:e.onFeedClick},o.a.createElement(ne.a,null)),o.a.createElement(te.a,{color:"primary","aria-label":"add",className:t.fabButton,onClick:function(){c(!0)}},o.a.createElement(le.a,null)),r?o.a.createElement(be,{open:r,close:function(){c(!1)}}):null,o.a.createElement("div",{className:t.grow}),o.a.createElement(ee.a,{edge:"end",color:"inherit",onClick:e.onProfileClick},o.a.createElement(re.a,null))))))}var Se=Object(v.a)(function(e){return{container:{marginTop:e.spacing(10),marginBottom:e.spacing(10)}}}),Ce=Object(l.b)(function(e){return{auth:e.auth,posts:e.posts}},{logoutUser:k,fetchAllPosts:function(){return function(e){return C.a.get("/basicgrams").then(function(t){console.log("successfully fetched posts",t.data),e({type:"FETCH_POSTS_SUCCESS",payload:t.data.basicgrams})}).catch(function(t){e({type:"GET_ERRORS",payload:t.response.data})})}}})(function(e){var t=e.logoutUser,a=e.history,n=e.fetchAllPosts,r=e.posts,c=Se();o.a.useEffect(function(){n()},[n]);return console.log(r.posts),o.a.createElement(o.a.Fragment,null,o.a.createElement(L,{onLogoutClick:function(e){e.preventDefault(),t()}}),o.a.createElement(U.a,{className:c.container,maxWidth:"sm"},o.a.createElement(h.a,{container:!0,spacing:3},r.posts.length>0?Object(P.a)(r.posts).reverse().map(function(e){return o.a.createElement(Z,{post:e,onClickPost:function(){return a.push({pathname:"/feed/post/".concat(e._id),state:{post:e,flag:"feed"}})}})}):o.a.createElement("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}},o.a.createElement("img",{src:F.a,height:"150px"}),o.a.createElement(b.a,{component:"h5",variant:"h5",align:"center",noWrap:!0},"No posts available")))),o.a.createElement(ye,{onProfileClick:function(){a.push("/profile")},onFeedClick:function(){a.push("/feed")}}))}),Oe=(a(144),a(209)),we=a(210),ke=Object(v.a)(function(e){return{NameTitle:{flex:1,paddingBottom:"1rem",color:"#7E7E7E"},userNameTitle:{flex:1,paddingTop:"2rem",paddingBottom:"0.5rem",fontFamily:"Abril Fatface, cursive"},toolbarSecondary:{justifyContent:"space-between",overflowX:"auto"},toolbarLink:{padding:e.spacing(1),flexShrink:0},mainGrid:{marginTop:e.spacing(2),display:"flex",justifyContent:"center"},container:{marginTop:e.spacing(10),marginBottom:e.spacing(10)},card:{flex:1},media:{height:0,paddingTop:"100%"},appBar:{background:"#fff",color:"#000"},appBarBottom:{background:"#fff",color:"#000",top:"auto",bottom:0},grow:{flexGrow:1},fabButton:{position:"absolute",zIndex:1,top:-30,left:0,right:0,margin:"0 auto"},commentInput:{width:"100%",border:"none",outline:"none",fontSize:"13px"},inputBox:{padding:e.spacing(2)}}}),xe=Object(l.b)(function(e){return{auth:e.auth,posts:e.posts}},{logoutUser:k,fetchPostsByUserId:function(e){return function(t){return C.a.get("/basicgrams/user/".concat(e)).then(function(e){t({type:"FETCH_USER_POSTS_SUCCESS",payload:e.data.basicgrams})}).catch(function(e){t({type:"GET_ERRORS",payload:e.response.data})})}}})(function(e){var t=e.logoutUser,a=e.history,n=e.posts,r=e.fetchPostsByUserId,c=(e.width,ke()),l=o.a.useState(""),i=Object(p.a)(l,2),s=i[0],u=i[1];o.a.useEffect(function(){var e=function(e){var t=RegExp(e+"[^;]+").exec(document.cookie);return decodeURIComponent(t?t.toString().replace(/^[^=]+./,""):"")}("userId");C.a.get("/user/".concat(e)).then(function(e){u(e.data.user)}).catch(function(e){console.log(e)}),r(e)},[]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(L,{onLogoutClick:function(e){e.preventDefault(),t()}}),o.a.createElement(U.a,{className:c.container,maxWidth:"md"},o.a.createElement(b.a,{component:"h3",variant:"h3",noWrap:!0,className:c.userNameTitle},s.username),o.a.createElement(b.a,{component:"h5",noWrap:!0,className:c.NameTitle},s.name),o.a.createElement(V.a,{style:{marginBottom:"1rem"}}),o.a.createElement(Oe.a,{cellHeight:300,cols:3,spacing:20},n.posts.length>0?Object(P.a)(n.posts).reverse().map(function(e){return o.a.createElement(we.a,{key:e._id,post:e,className:"tileStyle",onClick:function(){return a.push({pathname:"/feed/post/".concat(e._id),state:{post:e}})}},o.a.createElement("img",{src:e.image}))}):o.a.createElement(h.a,{container:!0},o.a.createElement("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}},o.a.createElement("img",{src:F.a,height:"150px"}),o.a.createElement(b.a,{component:"h5",variant:"h5",align:"center",noWrap:!0},"No posts available"))))),o.a.createElement(ye,{onProfileClick:function(){a.push("/profile")},onFeedClick:function(){a.push("/feed")}}))}),je=a(216),Ne=a(211),Te=a(191),Re=a(212),_e=a(213),Pe=Object(v.a)(function(e){return{card:{display:"flex",height:"75vh"},cardDetails:{flex:2},cardMedia:{flex:3.5},mainGrid:{marginTop:e.spacing(10)},root:{width:"100%"},commentSection:{height:"65vh",overflowY:"auto"},commentInput:{width:"100%",border:"none",outline:"none",fontSize:"13px"}}}),Ue=Object(l.b)(function(e){return{comments:e.comments}},{fetchCommentsByPost:function(e){return function(t){return C.a.get("/basicgrams/comment/post/".concat(e)).then(function(e){console.log(e.data),t({type:"FETCH_COMMENTS_SUCCESS",payload:e.data.comments})}).catch(function(e){t({type:"GET_ERRORS",payload:e.response.data})})}},addComment:Y})(function(e){var t=e.fetchCommentsByPost,a=e.addComment,n=e.comments,r=e.post,c=o.a.useState(""),l=Object(p.a)(c,2),i=l[0],s=l[1],d=Pe(),f=function(){var e=Object(m.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a(r._id,i).then(function(){return s("")});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();return o.a.useEffect(function(){t(r._id)},[t]),o.a.createElement(h.a,{className:d.mainGrid},o.a.createElement(h.a,{item:!0,sm:12,md:12},o.a.createElement(H.a,{className:d.card,elevation:3},o.a.createElement(je.a,{xsDown:!0},o.a.createElement(X.a,{className:d.cardMedia,image:r.image})),o.a.createElement("div",{className:d.cardDetails},o.a.createElement(Ne.a,{className:d.infoSection},o.a.createElement(b.a,{component:"subtitle1",variant:"subtitle1"},o.a.createElement("b",null,r.author.username))),o.a.createElement(V.a,null),o.a.createElement("div",{className:d.commentSection},o.a.createElement(Te.a,{className:d.root},n.comments.map(function(e){return o.a.createElement(Re.a,null,o.a.createElement(_e.a,{primary:o.a.createElement(o.a.Fragment,null,o.a.createElement(b.a,{component:"span",variant:"body2",className:d.inline,color:"textPrimary"},o.a.createElement("b",null,e.author.username)," ",e.text)),secondary:o.a.createElement(o.a.Fragment,null,o.a.createElement(b.a,{component:"span",variant:"body2",className:d.inline,color:"textSecondary"},K()("".concat(e.createdAt)).startOf("second").fromNow()))}))}))),o.a.createElement(V.a,null),o.a.createElement(Ne.a,{className:d.inputSection},o.a.createElement("form",{onSubmit:f,style:{width:"100%"}},o.a.createElement("button",{type:"submit",style:{float:"right",fontSize:"13px"}},"Post"),o.a.createElement("div",{style:{overflow:"hidden",paddingRight:"0.5em"}},o.a.createElement("input",{type:"text",placeholder:"Add a comment",className:d.commentInput,value:i,onChange:function(e){return s(e.target.value)}}))))))))}),Be=Object(l.b)(function(e){return{auth:e.auth}},{logoutUser:k})(function(e){var t=e.logoutUser,a=e.history,n=e.location;return console.log("location.state",n.state),o.a.createElement(o.a.Fragment,null,o.a.createElement(L,{onLogoutClick:function(e){e.preventDefault(),t()},backButton:function(e){e.preventDefault(),"feed"==n.state.flag?a.push("/feed"):a.push("/profile")}}),o.a.createElement(U.a,{maxWidth:"md"},o.a.createElement("main",null,o.a.createElement(Ue,{post:n.state.post}))),o.a.createElement(ye,{onProfileClick:function(){a.push("/profile")},onFeedClick:function(){a.push("/feed")}}))}),Fe=Object(l.b)(function(e){return{}})(function(e){var t=e.dispatch,a=new WebSocket("ws://"+window.location.host.split(":")[0]+(window.location.port&&":".concat(window.location.port))+"/websocket");if(a.onmessage=function(e){var a=JSON.parse(e.data);switch(console.log(a),a.type){case"UPDATE_FEED":console.log("UPDATE POSTERS"),C.a.get("/basicgrams").then(function(e){console.log("successfully fetched posts",e.data),t({type:"FETCH_POSTS_SUCCESS",payload:e.data.basicgrams})}).catch(function(e){t({type:"GET_ERRORS",payload:e.response.data})});break;case"UPDATE_COMMENT":console.log("UPDATE COMMENT",a.postId),C.a.get("/basicgrams/comment/post/".concat(a.postId)).then(function(e){console.log(e.data),t({type:"FETCH_COMMENTS_SUCCESS",payload:e.data.comments})}).catch(function(e){t({type:"GET_ERRORS",payload:e.response.data})});break;default:console.log("Unexpected message.")}},a.onerror=function(e){console.log(e)},localStorage.token){var n=localStorage.token;O(n),t(w(n))}return o.a.createElement("div",null,o.a.createElement(i.d,null,o.a.createElement(i.b,{exact:!0,path:"/",component:j}),o.a.createElement(i.b,{path:"/login",component:j}),o.a.createElement(i.b,{path:"/signup",component:T}),o.a.createElement(_,{exact:!0,path:"/feed",component:Ce}),o.a.createElement(i.b,{exact:!0,path:"/profile",component:xe}),o.a.createElement(i.b,{path:"/feed/post",component:Be})))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ie=a(98),Ae=a(51),De=a(31),Ge={posts:[],newPost:{}},We=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_POSTS_SUCCESS":case"FETCH_USER_POSTS_SUCCESS":return Object(De.a)({},e,{posts:t.payload});case"POST_UPLOAD_SUCCESS":return Object(De.a)({},e,{newPost:t.payload});default:return e}},ze={comments:[]},Me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_COMMENTS_SUCCESS":return Object(De.a)({},e,{comments:t.payload});case"ADD_COMMENT":return Object(De.a)({},e);default:return e}},Le=a(145),He={isAuthenticated:!1,user:{},loading:!1},qe={};a.d(t,"getAllPosts",function(){return Xe}),a.d(t,"getPostById",function(){return Ye});var Je=Object(Ae.c)({posts:We,auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return Object(De.a)({},e,{isAuthenticated:!Le(t.payload),user:t.payload});case"USER_LOADING":return Object(De.a)({},e,{loading:!0});default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":return t.payload;default:return e}},comment:Me,comments:Me}),Ve=Object(Ae.d)(Je,Object(Ae.a)(Ie.a)),Xe=function(e){return We.getAllPosts(e.posts)},Ye=function(e,t){return We.getPostById(e.posts,t)};c.a.render(o.a.createElement(l.a,{store:Ve},o.a.createElement(y.a,null,o.a.createElement(Fe,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},68:function(e,t,a){e.exports=a.p+"static/media/noposts.558fc787.svg"}},[[109,1,2]]]);
//# sourceMappingURL=main.ae50bf4b.chunk.js.map