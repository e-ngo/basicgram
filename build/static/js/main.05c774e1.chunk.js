(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{111:function(e,t,a){e.exports=a(149)},116:function(e,t,a){},147:function(e,t,a){},149:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(10),c=a.n(r),l=(a(116),a(13)),i=a(41),s=a(25),u=a.n(s),m=a(36),p=a(9),d=a(195),f=a(192),g=a(217),h=a(101),E=a(190),b=a(53),v=a(92),y=a(35),S=a(14),O=a.n(S),C=function(e){e?O.a.defaults.headers.common.Authorization=e:delete O.a.defaults.headers.common.Authorization},w=function(e){return{type:"SET_CURRENT_USER",payload:e}},k=function(){return function(e){localStorage.removeItem("token"),localStorage.removeItem("userId"),document.cookie="userId=",document.cookie="token=",C(!1),e(w({}))}},x=a(62),j=a.n(x),N=Object(v.a)(function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(https://source.unsplash.com/random/1920x1080)",backgroundRepeat:"no-repeat",backgroundColor:e.palette.grey[50],backgroundSize:"cover",backgroundPosition:"center"},container:{display:"flex",alignItems:"center"},paper:{margin:e.spacing(8,4),flex:1},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},icon:{fontFamily:"Abril Fatface, cursive",marginBottom:e.spacing(8)}}}),T=Object(l.b)(function(e){return{auth:e.auth,errors:e.errors}},{loginUser:function(e){return function(t){O.a.post("/auth/login",e).then(function(e){var a=e.data,n=a.token,o=a.userId;document.cookie="token=".concat(n),document.cookie="userId=".concat(o),localStorage.setItem("token",n),localStorage.setItem("userId",o),C(n),t(w(n))}).catch(function(e){return t({type:"GET_ERRORS",payload:e.response.data})})}}})(Object(i.g)(function(e){var t=e.loginUser,a=e.auth,n=e.history,r=N(),c=o.a.useState(""),l=Object(p.a)(c,2),i=l[0],s=l[1],v=o.a.useState(""),S=Object(p.a)(v,2),O=S[0],C=S[1],w=o.a.useState(!1),k=Object(p.a)(w,2),x=k[0],T=k[1],R=o.a.useState(!1),_=Object(p.a)(R,2),P=_[0],U=_[1],B=o.a.useState(""),F=Object(p.a)(B,2),I=F[0],A=F[1],D=o.a.useState(""),G=Object(p.a)(D,2),W=G[0],z=G[1];var M=function(){var e=Object(m.a)(u.a.mark(function e(n){var o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),o={username:i,password:j()(O)},""===i&&T(!0),A("username cannot be blank"),""===O&&U(!0),z("password cannot be blank"),""!=i&&""!=O&&(t(o),a.isAuthenticated||(z("invalid password"),T(!1),U(!0)));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();return a.isAuthenticated&&n.push("/feed"),o.a.createElement(E.a,{container:!0,component:"main",className:r.root},o.a.createElement(f.a,null),o.a.createElement(E.a,{item:!0,xs:!1,sm:4,md:8,className:r.image}),o.a.createElement(E.a,{item:!0,xs:12,sm:8,md:4,component:h.a,elevation:6,className:r.container,square:!0},o.a.createElement("div",{className:r.paper},o.a.createElement(b.a,{component:"h1",variant:"h3",className:r.icon},"basic."),o.a.createElement("form",{className:r.form,onSubmit:M,noValidate:!0},o.a.createElement(g.a,{error:x,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",autoFocus:!0,value:i,helperText:x?I:"",onChange:function(e){return s(e.target.value)}}),o.a.createElement(g.a,{error:P,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:O,helperText:P?W:"",onChange:function(e){return C(e.target.value)}}),o.a.createElement(d.a,{type:"submit",variant:"contained",color:"primary",className:r.submit},"Sign In"),o.a.createElement(E.a,{container:!0,justify:"flex-start"},o.a.createElement(E.a,{item:!0},o.a.createElement(y.b,{to:"/signup",variant:"body2"},"Don't have an account? ",o.a.createElement("b",null,"Sign Up"))))))))})),R=Object(v.a)(function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(https://source.unsplash.com/random/1920x1080)",backgroundRepeat:"no-repeat",backgroundColor:e.palette.grey[50],backgroundSize:"cover",backgroundPosition:"center"},container:{display:"flex",alignItems:"center"},paper:{margin:e.spacing(8,4),flex:1},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(4)},submit:{margin:e.spacing(3,0,2)},icon:{fontFamily:"Abril Fatface, cursive",marginBottom:e.spacing(8)}}}),_=Object(l.b)(function(e){return{auth:e.auth,errors:e.errors}},{registerUser:function(e,t){return function(a){O.a.post("/auth/create-user",e).then(function(e){return t.push("/login")}).catch(function(e){return a({type:"GET_ERRORS",payload:e.response.data})})}}})(Object(i.g)(function(e){var t=e.registerUser,a=e.history,n=e.auth,r=R(),c=o.a.useState(""),l=Object(p.a)(c,2),i=l[0],s=l[1],v=o.a.useState(""),S=Object(p.a)(v,2),O=S[0],C=S[1],w=o.a.useState(""),k=Object(p.a)(w,2),x=k[0],N=k[1],T=o.a.useState(""),_=Object(p.a)(T,2),P=_[0],U=_[1],B=o.a.useState(!1),F=Object(p.a)(B,2),I=F[0],A=F[1],D=o.a.useState(!1),G=Object(p.a)(D,2),W=G[0],z=G[1],M=o.a.useState(!1),L=Object(p.a)(M,2),H=L[0],q=L[1],J=o.a.useState(!1),V=Object(p.a)(J,2),X=V[0],Y=V[1];var $=function(){var e=Object(m.a)(u.a.mark(function e(n){var o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),o={username:O,password:j()(P),name:x,email:i},console.log(o),A(""===O),Y(""===P),z(""===i),q(""===x),""!=O&&""!=P&&""!=i&&""!=x&&t(o,a);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();return n.isAuthenticated&&a.push("/feed"),o.a.createElement(E.a,{container:!0,component:"main",className:r.root},o.a.createElement(f.a,null),o.a.createElement(E.a,{item:!0,xs:!1,sm:4,md:8,className:r.image}),o.a.createElement(E.a,{item:!0,xs:12,sm:8,md:4,component:h.a,elevation:6,className:r.container,square:!0},o.a.createElement("div",{className:r.paper},o.a.createElement(b.a,{component:"h1",variant:"h3",className:r.icon},"basic."),o.a.createElement("form",{className:r.form,onSubmit:$,noValidate:!0},o.a.createElement(E.a,{container:!0,spacing:2},o.a.createElement(E.a,{item:!0,xs:12},o.a.createElement(g.a,{error:H,autoComplete:"fname",name:"fullName",variant:"outlined",required:!0,fullWidth:!0,id:"fullName",label:"Full Name",autoFocus:!0,value:x,helperText:H?"full name cannot be blank":"",onChange:function(e){return N(e.target.value)}})),o.a.createElement(E.a,{item:!0,xs:12},o.a.createElement(g.a,{error:I,variant:"outlined",required:!0,fullWidth:!0,id:"userName",label:"Username",name:"userName",autoComplete:"uname",value:O,helperText:I?"username cannot be blank":"",onChange:function(e){return C(e.target.value)}})),o.a.createElement(E.a,{item:!0,xs:12},o.a.createElement(g.a,{error:W,variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",value:i,helperText:W?"email address cannot be blank":"",onChange:function(e){return s(e.target.value)}})),o.a.createElement(E.a,{item:!0,xs:12},o.a.createElement(g.a,{error:X,variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:P,helperText:X?"password cannot be blank":"",onChange:function(e){return U(e.target.value)}}))),o.a.createElement(d.a,{type:"submit",variant:"contained",color:"primary",className:r.submit},"Sign Up"),o.a.createElement(E.a,{container:!0,justify:"flex-start"},o.a.createElement(E.a,{item:!0},o.a.createElement(y.b,{to:"/login",variant:"body2"},"Already have an account? ",o.a.createElement("b",null,"Sign in"))))))))})),P=a(68),U=Object(l.b)(function(e){return{auth:e.auth}})(function(e){var t=e.component,a=e.auth,n=Object(P.a)(e,["component","auth"]);return o.a.createElement(i.b,Object.assign({},n,{render:function(e){return!0===a.isAuthenticated?o.a.createElement(t,e):o.a.createElement(i.a,{to:"/login"})}}))}),B=a(71),F=a(210),I=a(69),A=a.n(I),D=a(198),G=a(199),W=a(196),z=a(197),M=a(200),L=Object(v.a)(function(e){return{toolbarTitle:{flex:1,textAlign:"center",fontFamily:"Abril Fatface, cursive"},appBar:{background:"#fff",color:"#000"}}});function H(e){var t=e.children,a=e.window,n=Object(W.a)({target:a?a():void 0});return o.a.createElement(z.a,{appear:!1,direction:"down",in:!n},t)}function q(e){var t=L();return o.a.createElement(o.a.Fragment,null,o.a.createElement(H,e,o.a.createElement(D.a,{positio:"static",className:t.appBar,elevation:0},o.a.createElement(G.a,null,e.backButton?o.a.createElement(M.a,{style:{cursor:"pointer"},onClick:e.backButton},"Back"):"",o.a.createElement(b.a,{component:"h1",variant:"h4",color:"inherit",align:"center",noWrap:!0,className:t.toolbarTitle},"basic."),o.a.createElement(M.a,{style:{cursor:"pointer"},onClick:e.onLogoutClick},"Logout")))))}var J=a(201),V=a(202),X=a(203),Y=a(204),$=a(205),K=function(e,t){return function(a){var n={text:t,postId:e};return O.a.post("/basicgrams/comment/new",n).then(function(e){console.log("Succesfully added comment")}).catch(function(e){a({type:"GET_ERRORS",payload:e.response.data})})}},Q=a(70),Z=a.n(Q),ee=Object(v.a)(function(e){return{mainGrid:{marginTop:e.spacing(2),display:"flex",justifyContent:"center"},card:{flex:1},media:{height:0,paddingTop:"100%"},commentInput:{width:"100%",border:"none",outline:"none",fontSize:"13px"},inputBox:{padding:e.spacing(2)}}}),te=Object(l.b)(function(e){return{comments:e.comments}},{addComment:K})(function(e){var t=e.addComment,a=e.post,n=e.onClickPost,r=ee(),c=o.a.useState(""),l=Object(p.a)(c,2),i=l[0],s=l[1],d=function(){var e=Object(m.a)(u.a.mark(function e(n){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),t(a._id,i).then(function(){return s("")});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();return o.a.createElement(E.a,{item:!0,className:r.mainGrid,xs:12,md:12},o.a.createElement(J.a,{className:r.card,elevation:3},o.a.createElement(V.a,{onClick:n},o.a.createElement(X.a,null,o.a.createElement(b.a,{component:"subtitle1",variant:"subtitle1"},o.a.createElement("b",null,a.author.username))),o.a.createElement(Y.a,null),o.a.createElement($.a,{className:r.media,image:a.image,title:"Image title"}),o.a.createElement(X.a,null,o.a.createElement(b.a,{component:"subtitle2",variant:"subtitle2"},o.a.createElement("b",null,a.author.username)," ",a.caption),o.a.createElement(b.a,{component:"p",variant:"p",color:"textSecondary"},Z()("".concat(a.createdAt)).startOf("second").fromNow()))),o.a.createElement(Y.a,null),o.a.createElement("div",{className:r.inputBox},o.a.createElement("form",{onSubmit:d},o.a.createElement("button",{type:"submit",style:{float:"right",fontSize:"13px"}},"Post"),o.a.createElement("div",{style:{overflow:"hidden",paddingRight:"0.5em"}},o.a.createElement("input",{type:"text",placeholder:"Add a comment",className:r.commentInput,value:i,onChange:function(e){return s(e.target.value)}}))))))}),ae=a(207),ne=a(211),oe=a(97),re=a.n(oe),ce=a(99),le=a.n(ce),ie=a(98),se=a.n(ie),ue=a(5),me=a(193),pe=a(209),de=a(220),fe=a(206),ge=a(208),he=a(96),Ee=a.n(he),be=Object(ue.a)(function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}})(function(e){var t=e.children,a=e.classes,n=e.onClose,r=Object(P.a)(e,["children","classes","onClose"]);return o.a.createElement(fe.a,Object.assign({disableTypography:!0,className:a.root},r),o.a.createElement(b.a,{variant:"h6"},t),n?o.a.createElement(ae.a,{"aria-label":"close",className:a.closeButton,onClick:n},o.a.createElement(Ee.a,null)):null)}),ve=Object(ue.a)(function(e){return{root:{padding:e.spacing(2)}}})(ge.a),ye=Object(l.b)(function(e){return{posts:e.posts,newPost:e.newPost}},{uploadPost:function(e,t){return function(a){var n=new FormData;return n.append("image",t),n.append("caption",e),O.a.post("/basicgrams/new",n,{headers:{"content-type":"multipart/form-data"}}).then(function(e){a({type:"POST_UPLOAD_SUCCESS",payload:e.newBasicgram})}).catch(function(e){a({type:"GET_ERRORS",payload:e.response.data})})}}})(function(e){var t=e.uploadPost,a=e.close,r=e.open,c=Object(n.useState)(null),l=Object(p.a)(c,2),i=l[0],s=l[1],u=Object(n.useState)(""),m=Object(p.a)(u,2),f=m[0],h=m[1],E=Object(n.useState)(""),b=Object(p.a)(E,2),v=b[0],y=b[1],S=o.a.useState({vertical:"top",horizontal:"center"}),O=Object(p.a)(S,2),C=O[0];O[1],C.vertical,C.horizontal;return o.a.createElement(o.a.Fragment,null,o.a.createElement(de.a,{onClose:a,"aria-labelledby":"customized-dialog-title",open:r},o.a.createElement(be,{id:"customized-dialog-title",onClose:a},"New Post"),o.a.createElement(ve,{dividers:!0},o.a.createElement("div",null,o.a.createElement("div",{style:{display:"inline"}},o.a.createElement(me.a,{type:"file",onChange:function(e){e.preventDefault(),s(e.target.files[0]),h(URL.createObjectURL(e.target.files[0]))},accept:"image/*"}),i&&o.a.createElement(d.a,{autoFocus:!0,color:"primary",style:{float:"right"},onClick:function(e){e.preventDefault(),s(null),h("")}},"Remove File")),o.a.createElement("img",{style:{width:"100%"},src:f}),o.a.createElement(g.a,{multiline:!0,label:"Add a caption",style:{width:"100%",marginTop:"20px"},onChange:function(e){return y(e.target.value)}}))),o.a.createElement(pe.a,null,o.a.createElement(d.a,{autoFocus:!0,onClick:function(e){e.preventDefault(),t(v,i).then(function(){return a()})},color:"primary"},"Upload"))))}),Se=Object(v.a)(function(e){return{appBarBottom:{background:"#fff",color:"#000",top:"auto",bottom:0},grow:{flexGrow:1},fabButton:{position:"absolute",zIndex:1,top:-30,left:0,right:0,margin:"0 auto"}}});function Oe(e){var t=Se(),a=o.a.useState(!1),n=Object(p.a)(a,2),r=n[0],c=n[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(D.a,Object.assign({position:"fixed",color:"primary",className:t.appBarBottom},e),o.a.createElement(F.a,{maxWidth:"sm"},o.a.createElement(G.a,null,o.a.createElement(ae.a,{edge:"start",color:"inherit",onClick:e.onFeedClick},o.a.createElement(re.a,null)),o.a.createElement(ne.a,{color:"primary","aria-label":"add",className:t.fabButton,onClick:function(){c(!0)}},o.a.createElement(se.a,null)),r?o.a.createElement(ye,{open:r,close:function(){c(!1)}}):null,o.a.createElement("div",{className:t.grow}),o.a.createElement(ae.a,{edge:"end",color:"inherit",onClick:e.onProfileClick},o.a.createElement(le.a,null))))))}var Ce=Object(v.a)(function(e){return{container:{marginTop:e.spacing(10),marginBottom:e.spacing(10)}}}),we=Object(l.b)(function(e){return{auth:e.auth,posts:e.posts}},{logoutUser:k,fetchAllPosts:function(){return function(e){return O.a.get("/basicgrams").then(function(t){console.log("successfully fetched posts",t.data),e({type:"FETCH_POSTS_SUCCESS",payload:t.data.basicgrams})}).catch(function(t){e({type:"GET_ERRORS",payload:t.response.data})})}}})(function(e){var t=e.logoutUser,a=e.history,n=e.fetchAllPosts,r=e.posts,c=Ce();o.a.useEffect(function(){n()},[n]);return console.log(r.posts),o.a.createElement(o.a.Fragment,null,o.a.createElement(q,{onLogoutClick:function(e){e.preventDefault(),t()}}),o.a.createElement(F.a,{className:c.container,maxWidth:"sm"},o.a.createElement(E.a,{container:!0,spacing:3},r.posts.length>0?Object(B.a)(r.posts).reverse().map(function(e){return o.a.createElement(te,{post:e,onClickPost:function(){return a.push({pathname:"/feed/post/".concat(e._id),state:{post:e,flag:"feed"}})}})}):o.a.createElement("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}},o.a.createElement("img",{src:A.a,height:"150px"}),o.a.createElement(b.a,{component:"h5",variant:"h5",align:"center",noWrap:!0},"No posts available")))),o.a.createElement(Oe,{onProfileClick:function(){a.push("/profile")},onFeedClick:function(){a.push("/feed")}}))}),ke=(a(147),a(212)),xe=a(213),je=Object(v.a)(function(e){return{NameTitle:{flex:1,paddingBottom:"1rem",color:"#7E7E7E"},userNameTitle:{flex:1,paddingTop:"2rem",paddingBottom:"0.5rem",fontFamily:"Abril Fatface, cursive"},toolbarSecondary:{justifyContent:"space-between",overflowX:"auto"},toolbarLink:{padding:e.spacing(1),flexShrink:0},mainGrid:{marginTop:e.spacing(2),display:"flex",justifyContent:"center"},container:{marginTop:e.spacing(10),marginBottom:e.spacing(10)},card:{flex:1},media:{height:0,paddingTop:"100%"},appBar:{background:"#fff",color:"#000"},appBarBottom:{background:"#fff",color:"#000",top:"auto",bottom:0},grow:{flexGrow:1},fabButton:{position:"absolute",zIndex:1,top:-30,left:0,right:0,margin:"0 auto"},commentInput:{width:"100%",border:"none",outline:"none",fontSize:"13px"},inputBox:{padding:e.spacing(2)}}}),Ne=Object(l.b)(function(e){return{auth:e.auth,posts:e.posts}},{logoutUser:k,fetchPostsByUserId:function(e){return function(t){return O.a.get("/basicgrams/user/".concat(e)).then(function(e){t({type:"FETCH_USER_POSTS_SUCCESS",payload:e.data.basicgrams})}).catch(function(e){t({type:"GET_ERRORS",payload:e.response.data})})}}})(function(e){var t=e.logoutUser,a=e.history,n=e.posts,r=e.fetchPostsByUserId,c=(e.width,je()),l=o.a.useState(""),i=Object(p.a)(l,2),s=i[0],u=i[1];o.a.useEffect(function(){var e=function(e){var t=RegExp(e+"[^;]+").exec(document.cookie);return decodeURIComponent(t?t.toString().replace(/^[^=]+./,""):"")}("userId");O.a.get("/user/".concat(e)).then(function(e){u(e.data.user)}).catch(function(e){console.log(e)}),r(e)},[]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(q,{onLogoutClick:function(e){e.preventDefault(),t()}}),o.a.createElement(F.a,{className:c.container,maxWidth:"md"},o.a.createElement(b.a,{component:"h3",variant:"h3",noWrap:!0,className:c.userNameTitle},s.username),o.a.createElement(b.a,{component:"h5",noWrap:!0,className:c.NameTitle},s.name),o.a.createElement(Y.a,{style:{marginBottom:"1rem"}}),o.a.createElement(ke.a,{cellHeight:300,cols:3,spacing:20},n.posts.length>0?Object(B.a)(n.posts).reverse().map(function(e){return o.a.createElement(xe.a,{key:e._id,post:e,className:"tileStyle",onClick:function(){return a.push({pathname:"/feed/post/".concat(e._id),state:{post:e}})}},o.a.createElement("img",{src:e.image}))}):o.a.createElement(E.a,{container:!0},o.a.createElement("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}},o.a.createElement("img",{src:A.a,height:"150px"}),o.a.createElement(b.a,{component:"h5",variant:"h5",align:"center",noWrap:!0},"No posts available"))))),o.a.createElement(Oe,{onProfileClick:function(){a.push("/profile")},onFeedClick:function(){a.push("/feed")}}))}),Te=a(219),Re=a(214),_e=a(194),Pe=a(215),Ue=a(216),Be=Object(v.a)(function(e){return{card:{display:"flex",height:"75vh"},cardDetails:{flex:2},cardMedia:{flex:3.5},mainGrid:{marginTop:e.spacing(10)},root:{width:"100%"},commentSection:{height:"65vh",overflowY:"auto"},commentInput:{width:"100%",border:"none",outline:"none",fontSize:"13px"}}}),Fe=Object(l.b)(function(e){return{comments:e.comments}},{fetchCommentsByPost:function(e){return function(t){return O.a.get("/basicgrams/comment/post/".concat(e)).then(function(e){console.log(e.data),t({type:"FETCH_COMMENTS_SUCCESS",payload:e.data.comments})}).catch(function(e){t({type:"GET_ERRORS",payload:e.response.data})})}},addComment:K})(function(e){var t=e.fetchCommentsByPost,a=e.addComment,n=e.comments,r=e.post,c=o.a.useState(""),l=Object(p.a)(c,2),i=l[0],s=l[1],d=Be(),f=function(){var e=Object(m.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a(r._id,i).then(function(){return s("")});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();return o.a.useEffect(function(){t(r._id)},[t]),o.a.createElement(E.a,{className:d.mainGrid},o.a.createElement(E.a,{item:!0,sm:12,md:12},o.a.createElement(J.a,{className:d.card,elevation:3},o.a.createElement(Te.a,{xsDown:!0},o.a.createElement($.a,{className:d.cardMedia,image:r.image})),o.a.createElement("div",{className:d.cardDetails},o.a.createElement(Re.a,{className:d.infoSection},o.a.createElement(b.a,{component:"subtitle1",variant:"subtitle1"},o.a.createElement("b",null,r.author.username))),o.a.createElement(Y.a,null),o.a.createElement("div",{className:d.commentSection},o.a.createElement(_e.a,{className:d.root},n.comments.map(function(e){return o.a.createElement(Pe.a,null,o.a.createElement(Ue.a,{primary:o.a.createElement(o.a.Fragment,null,o.a.createElement(b.a,{component:"span",variant:"body2",className:d.inline,color:"textPrimary"},o.a.createElement("b",null,e.author.username)," ",e.text)),secondary:o.a.createElement(o.a.Fragment,null,o.a.createElement(b.a,{component:"span",variant:"body2",className:d.inline,color:"textSecondary"},Z()("".concat(e.createdAt)).startOf("second").fromNow()))}))}))),o.a.createElement(Y.a,null),o.a.createElement(Re.a,{className:d.inputSection},o.a.createElement("form",{onSubmit:f,style:{width:"100%"}},o.a.createElement("button",{type:"submit",style:{float:"right",fontSize:"13px"}},"Post"),o.a.createElement("div",{style:{overflow:"hidden",paddingRight:"0.5em"}},o.a.createElement("input",{type:"text",placeholder:"Add a comment",className:d.commentInput,value:i,onChange:function(e){return s(e.target.value)}}))))))))}),Ie=Object(l.b)(function(e){return{auth:e.auth}},{logoutUser:k})(function(e){var t=e.logoutUser,a=e.history,n=e.location;return console.log("location.state",n.state),o.a.createElement(o.a.Fragment,null,o.a.createElement(q,{onLogoutClick:function(e){e.preventDefault(),t()},backButton:function(e){e.preventDefault(),"feed"==n.state.flag?a.push("/feed"):a.push("/profile")}}),o.a.createElement(F.a,{maxWidth:"md"},o.a.createElement("main",null,o.a.createElement(Fe,{post:n.state.post}))),o.a.createElement(Oe,{onProfileClick:function(){a.push("/profile")},onFeedClick:function(){a.push("/feed")}}))}),Ae=Object(l.b)(function(e){return{}})(function(e){var t=e.dispatch,a=new WebSocket("ws://"+window.location.host.split(":")[0]+(window.location.port&&":".concat(window.location.port))+"/websocket");if(a.onmessage=function(e){var a=JSON.parse(e.data);switch(a.type){case"UPDATE_FEED":console.log("UPDATE POSTERS"),O.a.get("/basicgrams").then(function(e){console.log("successfully fetched posts",e.data),t({type:"FETCH_POSTS_SUCCESS",payload:e.data.basicgrams})}).catch(function(e){console.log(e),t({type:"GET_ERRORS",payload:e.response.data})});break;case"UPDATE_COMMENT":console.log("UPDATE COMMENT",a.postId),O.a.get("/basicgrams/comment/post/".concat(a.postId)).then(function(e){console.log(e.data),t({type:"FETCH_COMMENTS_SUCCESS",payload:e.data.comments})}).catch(function(e){t({type:"GET_ERRORS",payload:e.response.data})});break;default:console.log("Unexpected message.")}},a.onerror=function(e){console.log(e)},localStorage.token){var n=localStorage.token;C(n),t(w(n))}return o.a.createElement("div",null,o.a.createElement(i.d,null,o.a.createElement(i.b,{exact:!0,path:"/",component:T}),o.a.createElement(i.b,{path:"/login",component:T}),o.a.createElement(i.b,{path:"/signup",component:_}),o.a.createElement(U,{exact:!0,path:"/feed",component:we}),o.a.createElement(i.b,{exact:!0,path:"/profile",component:Ne}),o.a.createElement(i.b,{path:"/feed/post",component:Ie})))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var De=a(100),Ge=a(51),We=a(31),ze={posts:[],newPost:{}},Me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_POSTS_SUCCESS":case"FETCH_USER_POSTS_SUCCESS":return Object(We.a)({},e,{posts:t.payload});case"POST_UPLOAD_SUCCESS":return Object(We.a)({},e,{newPost:t.payload});default:return e}},Le={comments:[]},He=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_COMMENTS_SUCCESS":return Object(We.a)({},e,{comments:t.payload});case"ADD_COMMENT":return Object(We.a)({},e);default:return e}},qe=a(148),Je={isAuthenticated:!1,user:{},loading:!1},Ve={};a.d(t,"getAllPosts",function(){return $e}),a.d(t,"getPostById",function(){return Ke});var Xe=Object(Ge.c)({posts:Me,auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return Object(We.a)({},e,{isAuthenticated:!qe(t.payload),user:t.payload});case"USER_LOADING":return Object(We.a)({},e,{loading:!0});default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":return t.payload;default:return e}},comment:He,comments:He}),Ye=Object(Ge.d)(Xe,Object(Ge.a)(De.a)),$e=function(e){return Me.getAllPosts(e.posts)},Ke=function(e,t){return Me.getPostById(e.posts,t)};c.a.render(o.a.createElement(l.a,{store:Ye},o.a.createElement(y.a,null,o.a.createElement(Ae,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},69:function(e,t,a){e.exports=a.p+"static/media/noposts.558fc787.svg"}},[[111,1,2]]]);
//# sourceMappingURL=main.05c774e1.chunk.js.map